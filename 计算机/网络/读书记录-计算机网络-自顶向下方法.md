# 读书记录-计算机网络-自顶向下方法

## 1.计算机网络和因特网

### 1.1.什么是因特网

#### 1.1.1.具体构成描述

【硬件描述】

计算机设备称作**主机**或**端系统**，它们组成的网络称作*计算机网络*，世界范围内的计算机网络即*因特网*。

端系统通过**通信链路**和**分组交换机**连接到一起。

链路的**传输速率**以比特/秒（bit/s）度量。

当端系统向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节，由此形成的信息包称作**分组**。

最著名的分组交换机类型是**路由器**和**分组交换机**。（TODO:路由和分组交换机的区别）。

一个分组所经历的一系列通信链路和分组交换机成为通过该网络的**路径**。

端系统通过**ISP**（Internet Service Provider，因特网提供商）接入因特网。

端系统、分组交换机和其他因特网部件都要运行一系列**协议**。

**TCP**和**IP**是因特网中两个最重要的协议。

**因特网标准**由 IETF 研发，其标准文档成为**请求评论**。

#### 1.1.2.服务描述

【软件描述】

涉及多个相互交换数据的端系统的应用程序，称作**分布式程序**。

```
因特网应用程序运行在端系统上，分组交换机不在意作为数据源或宿的应用程序。
```

与因特网相连的端系统提供了一个**套接字接口**，该接口规定了因特网上一个端系统上的程序向另一个端系统上的程序交付数据的方式。

#### 1.1.3.什么是协议

**协议**定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送或接受一条报文或其他事件所采取的动作。

```
为了完成一项工作，多个通信实体必须运行相同的协议。
```

### 1.2.网络边缘

【端系统位于网络边缘】

主机有时被分为两类：**客户**和**服务器**。

#### 1.2.1.接入网

**接入网**指将端系统物理连接到其**边缘路由器**的网络。边缘路由器指端系统到其他远程端系统路径上的第一台路由器。

- 家庭接入：DSL、电缆、FTTH、拨号和卫星。
  - **DSL**：数字用户线。
    - 复用了现有的电话基础设施。使用 DSL 时，电话公司也是它的 ISP。
    - 需要 DSL 调制解调器。
  - **电缆因特网接入**。
    - 复用了有线电视的基础设施。
    - 需要电缆调制解调器。
    - 电缆因特网接入的一个重要特征是共享广播媒体。
  - **FTTH**：光纤到户。
    - 可以从本地中心局到每户设置一根光纤。
    - 更为一般的是多户共享一根光纤。分布体系有两种：主动光纤网络（AON）和被动光纤网络（PON）。
      - 被动光纤网络：每个家庭具有一个[光纤网络端接器（ONT）（即光调制解调器，光猫）](https://baike.baidu.com/item/%E5%85%89%E8%B0%83%E5%88%B6%E8%A7%A3%E8%B0%83%E5%99%A8/9455758)，连接到光纤分配器集结到一根光纤，连接到光纤线路端接器（OLT），OLT 将光信号转换为电信号，与因特网相连。如图。![](./_resources_/0000100001.jpg)
      - 主动光纤网络本质上就是交换因特网。
  - **卫星链路**可在偏远地区使用。
  - **拨号网络**：用户经电话线连接到 ISP 的调制解调器。
- 企业接入：以太网和 WIFI。
  - **以太网**：使用**局域网（LAN）**将端系统连接到边缘路由器。
  - 基于 IEEE802.11 技术的无限 LAN 接入通俗地成为**WIFI**。
- 广域无线接入：3G 和 LTE。

#### 1.2.2.物理媒体

**物理媒体**通过电磁波或光脉冲等发送比特。

物理媒体分为两种类型：

- **引导型媒体**，电波沿着固体媒体前行。
- **非引导型媒体**，电波在空气或外层空间中传播。

常见物理媒体：

- **双绞铜线**。**无屏蔽双绞线**常用于局域网。
- **同轴电缆**。通常被用作**共享媒体**。
- **光纤**。通常被用作长途传输媒体。
- **陆地无线电通信**。分为三类：短距离，1-2 米；中距离，10-100 米；远距离，远至数万米。
- **卫星无线电通信**。通常使用两种卫星：**同步卫星**和**近地轨道卫星**。

### 1.3.网络核心

【交换机和链路位于网络核心】

#### 1.3.1.分组交换

【分组交换是因特网采用的交换形式】

端系统彼此交换**报文**，报文包含控制功能或数据。源将报文划分为较小的数据款，称作**分组**。在源和目的地之间，每个分组都通过**链路**和**分组交换机**。

##### 1. 存储转发传输

**存储转发传输**是指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组。

从源到目的地发送一个分组，分组长度为 L，通过 N 条速度均为 R 的链路组成的路径，端到端时延是：$d_{端到端}=N\frac{L}{R}$ 。

##### 2.排队时延和分组丢失

分组交换机具有一个**输出缓存**（或**输出队列**），用于存储准备发往的那条链路的分组。如果链路正在忙于传输其他分组，到达分组必须在输出缓存中等待，称为**排队时延**。因为缓存空间大小有限，如果到达分组到来时发现缓存已满，这时会出现**分组丢失**（**丢包**）。

##### 3. 转发表和路由选择协议

每个端系统具有一个 IP 地址。IP 地址具有一种等级结构，当分组到达路由器时，路由器检查目的地址的一部分，并向相邻路由器转发该分组。

每台路由器具有一个**转发表**，用于将目的地址（或目的地址的一部分）映射为输出链路。因特网使用一些特殊的**路由选择协议**，自动地设置转发表。

#### 1.3.2.电路交换

【电路交换是因特网未采用的交换形式】

电路交换预留了端系统间沿路径通信所需要的资源；而分组交换是不预留的。

电路交换中，沿着发送方和接收方之间路径上的交换机都将为该连接维护连接状态，该连接成为一条**电路**，这是一个名副其实的连接，是两台主机专用的**端到端连接**。

##### 1·电路交换网络中的复用

链路中的电路是通过**频分复用**（FDM）或**时分复用**（TDM）来实现。

- 频分复用中，连接期间为每条连接专用一个频段。该频段宽度成为**带宽**。
- 时分复用中，时间被划分为固定长度的帧，每个帧又被划分为固定数量的时隙，连接期间该连接专用一个时隙。

分组交换因存在**静默期**（维持连接但没有传输数据），所以不够经济。

##### 2.分组交换与电路交换的对比

1. 分组交换提供了比电路交换更好的带宽共享。
2. 分组交换比电路交换更简单、更有效、实现成本更低。

#### 1.3.3.网络的网络

网络的网络，是为了解决 ISP 之间的互联问题。

1. 网络结构 1。
   - 用单一的全球传输 ISP 互联所有接入 ISP。此时接入 ISP 被认为是**客户**，全球 ISP 被认为是**提供商**。
2. 网络结构 2。
   - 网络结构 1 中可能有多个全球 ISP，这导致网络结构 2。
   - 由数十万接入 ISP 和多个全球 ISP 组成。
   - 多个全球 ISP 之间必须保证互联。
3. 网络结构 3。
   - 在特定区域，可能有**区域 ISP**，区域 ISP 与接入 ISP 连接，区域 ISP 又与**第一层 ISP**连接。
   - 区域 ISP 也可能有多层结构。
4. 网络结构 4。
   - 在网络结构 3 的基础上增加接入点（POP）、多宿、对等、互联网交换点。
   - **POP** 是提供商网络中的路由器群组，客户 ISP 可以与提供商 ISP 相连。
   - **多宿**：ISP 可以与多个 ISP 连接。
   - **对等**：相同层级的邻近 ISP 可以直接将它们的网络连接到一起，使它们的流量径直连接，而不是通过上游的中间 ISP 传输。
   - **因特网交换点**（IXP）：它是一个汇合点，多个 ISP 能够在这里一起对等。
5. 网络结构 5。
   - 在网络结构 4 顶部增加**内容提供商网络**。
   - 内容提供商网络一般经过专用的 TCP/IP 网络互连，独立于公共因特网。

![](./_resources_//0000100002.png)

### 1.4.分组交换中的时延、丢包、吞吐量

#### 1.4.1.分组交换中的时延概述

- **处理时延**。路由器对分组的处理时间，检查分组首部和决定将分组导向何处是处理时延的一部分。
- **排队时延**。在输出缓存中，分组在链路上等待传输的时间。
- **

#### 1.4.2.排队时延和丢包

#### 1.4.3.端到端时延

### 1.5.协议层次及其服务模型

#### 1.5.1.分层的体系结构

#### 1.5.2.封装

### 1.6.面对攻击的网络

### 1.7.计算机网络和因特网的历史
